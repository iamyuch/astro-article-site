---
import { getAllTags } from '../utils/articles';

const tagMap = await getAllTags();
const tags = Array.from(tagMap.entries())
  .map(([name, count]) => ({ name, count }))
  .sort((a, b) => b.count - a.count);
---

<aside class="hidden md:block md:col-span-1 border-l-0 md:border-l border-gray-200 md:pl-6 space-y-8">
  <!-- 标签云 -->
  <div>
    <h3 class="font-bold border-b-2 border-black mb-3 pb-1 text-sm uppercase tracking-wide">
      标签
    </h3>
    <div class="flex flex-wrap gap-x-3 gap-y-1 text-sm leading-relaxed text-gray-700">
      {tags.map(tag => (
        <a href={`/tag/${encodeURIComponent(tag.name)}/`} class="text-link hover:text-link-hover hover:underline">
          [#{tag.name}]
        </a>
      ))}
    </div>
  </div>

  <!-- 友情链接 -->
  <div>
    <h3 class="font-bold border-b-2 border-black mb-3 pb-1 text-sm uppercase tracking-wide">
      友情链接
    </h3>
    <div class="text-sm flex flex-col gap-1">
      <p class="text-gray-500 italic">暂无链接</p>
    </div>
  </div>
</aside>

<!-- 移动端友情链接（放在页面底部） -->
<div class="md:hidden mt-12 pt-6 border-t border-gray-300">
  <h3 class="font-bold mb-3 text-sm uppercase tracking-wide">
    友情链接
  </h3>
  <div class="text-sm flex flex-col gap-1">
    <p class="text-gray-500 italic">暂无链接</p>
  </div>
</div>

<style>
  .text-link {
    color: #0000EE;
  }
  .text-link:visited {
    color: #551A8B;
  }
  .text-link-hover,
  .text-link:hover {
    color: #FF0000;
  }
</style>
